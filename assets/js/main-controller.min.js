/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2018. MIT licensed.
 */
!function(){var a=angular.module("MainModule"),t=0,e=3e5,r=function(a,r,n,i,l,s,o,u){if(0===t){servdPerPlaces=[{en:["per Emirate","per Branch","within branch"]},{ar:["حسب الإمارة","حسب الفرع","داخل الفرع"]}],a.servdPerPlaceEN=servdPerPlaces[0].en[0],a.servdPerPlaceAR=servdPerPlaces[1].ar[0],t++,a.error=null,a.loading=null,a.noData=null,a.model={selectedDepartment:null,selectedEmirate:null,selectedBranch:null,selectedCounter:null},a.filter={department:[],emirate:null,branch:null,counter:null,selctedDepartment:{}},a.graphSettings=[],a.selectDepartment=departmentsList,a.updateSelected=function(t){for(var e=$(t.target.closest(".filter-dept-item")),r=0;r<a.selectDepartment.length;r++)a.selectDepartment[r].prefix==e.attr("data-prefix")?a.selectDepartment[r].selected=!0:a.selectDepartment[r].selected=!1;$("body").attr("data-prefix",e.attr("data-prefix")),console.log(a.filter.selctedDepartment),n.passDepartment(a.filter.selctedDepartment,!0),"false"==e.attr("data-selected")&&a.initFunctions()};var d=function(){n.getGraphSettings().then(function(t){i(function(){a.$apply(function(){a.graphSettings={waiting:t[0],transac:t[1]}})},0)},function(){a.error="Graph Settings Error"})},c=function(){n.getDepartment().then(function(t){i(function(){a.$apply(function(){a.department=null;for(var e=[],r=[],n=0;n<t.length;n++)"MOHRE"==t[n].prefix?e.push(t[n]):r.push(t[n]);a.department={dataMohre:e,dataNonMohre:r,error:"Departments Error Found!",emoty:"No Departments Found"}})},1e3)},function(){a.error="Department Error"})},p=function(){n.getEmirates().then(function(t){i(function(){a.$apply(function(){a.emirates={data:t,error:"Emirates Error Found!",emoty:"No Emirates Found"}})},1e3)},function(){a.error="Emirates Error"})};a.loadBranches=function(t,e){a.loadingBranches=!0,a.branches=null,a.counters=null,a.loadingCounters=!1,a.filter.branch=null,a.filter.counter=null;var r=$(e.target.closest(".filter-item"));$(".filter-panel.emirates .filter-item").removeClass("active"),$(r).addClass("active"),n.getBranches(t).then(function(t){i(function(){a.$apply(function(){a.branches={data:t,mesage:"Select From Emirates to Display Branches",error:"Branches Error Found!",empty:"No Branches Found in This Emirate!"}})},1e3)},function(){a.error="error"})},a.loadCounters=function(t,e){a.loadingCounters=!0,a.counters=null,a.filter.counter=null;var r=$(e.target.closest(".filter-item"));$(".filter-panel.branches .filter-item").removeClass("active"),$(r).addClass("active"),i(function(){n.getCounters(t).then(function(t){i(function(){a.$apply(function(){a.counters={data:t,mesage:"Select from Emirates and Branches to Display Counters",error:"Counters Error Found!",empty:"No Counters Found in This Branch!"}})})},function(){a.error="error"})},400)},a.loadWaitingTime=function(t,e,r){console.log("dep        "+a.filter.department);var l=null;t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-gauge").removeClass("on-charted"));var s=null;a.waitingTime=null,s=e?r?function(){return n.getWaitingTime(e,r)}:function(){return n.getWaitingTime(e)}:a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getWaitingTime(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getWaitingTime(a.filter.emirate.branchPrefix)}:function(){return n.getWaitingTime()},s().then(function(t){i(function(){a.$apply(function(){a.waitingTime=null,a.waitingTime={data:t.avgWattingTime,status:t.statusWtt,error:!(null!=t&&!t.error),empty:0==t},m("power-gauge-waiting",a.waitingTime.data,a.graphSettings.waiting),m("power-gauge-waiting2",a.waitingTime.data,a.graphSettings.waiting),$(".chart-avgWait").parents(".pile").removeClass("chart-loading")})})})},a.loadTransactionTime=function(t,e,r){var l=null;a.transactionTime=null,t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-gauge").removeClass("on-charted"));var s=null;s=e?r?function(){return n.getTransactionTime(e,r)}:function(){return n.getTransactionTime(e)}:a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getTransactionTime(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getTransactionTime(a.filter.emirate.branchPrefix)}:function(){return n.getTransactionTime()},s().then(function(t){i(function(){a.$apply(function(){a.transactionTime=null,a.transactionTime={data:t.avgTransactionTime,status:t.statusTrt,error:!(null!=t&&!t.error),empty:0==t},m("power-gauge-transaction",a.transactionTime.data,a.graphSettings.transac),m("power-gauge-transaction2",a.transactionTime.data,a.graphSettings.transac),$(l).removeClass("chart-loading"),$(".chart-trans").parents(".pile").removeClass("chart-loading")})})})},a.loadCounterStatus=function(t,e,r){var l=null;a.counterStatus=null,a.donutCharts=null,t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-donut").removeClass("on-charted"));var s=null;s=e?r?function(){return n.getCounterStatus(e,r)}:function(){return n.getCounterStatus(e)}:a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getCounterStatus(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getCounterStatus(a.filter.emirate.branchPrefix)}:function(){return n.getCounterStatus()},s().then(function(t){i(function(){a.$apply(function(){a.counterStatus=null,a.donutCharts=null,a.counterStatus={data:t,error:!(null!=t&&!t.error),empty:0==t.noofOpenCounter&&0==t.noOfClosedCounter},a.donutCharts={data:[[a.counterStatus.data.noofOpenCounter,a.counterStatus.data.noOfClosedCounter]],open:a.counterStatus.data.noofOpenCounter,closed:a.counterStatus.data.noOfClosedCounter},$(l).removeClass("chart-loading").find(".chart-donut").addClass("on-charted"),$(".chart-donut").parents(".pile").removeClass("chart-loading")})})})},a.loadCustomerStatus=function(t,e,r){var l=null;a.customerStatus=null,a.pieCharts=null,t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-pie").removeClass("on-charted"));var s=null;s=e?r?function(){return n.getCustomerStatus(e,r)}:function(){return n.getCustomerStatus(e)}:a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getCustomerStatus(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getCustomerStatus(a.filter.emirate.branchPrefix)}:function(){return n.getCustomerStatus()},s().then(function(t){i(function(){a.$apply(function(){a.customerStatus=null,a.pieCharts=null,a.customerStatus={data:t,error:!(null!=t&&!t.error),empty:0==t.served&&0==t.waiting&&0==t.noShow},a.pieCharts={data:[[a.customerStatus.data.served,a.customerStatus.data.waiting,a.customerStatus.data.noShow]],total:a.customerStatus.data.served,waiting:a.customerStatus.data.waiting,noShow:a.customerStatus.data.noShow},$(l).removeClass("chart-loading").find(".chart-pie").addClass("on-charted"),$(".chart-pie").parents(".pile").removeClass("chart-loading")})})})},a.ServedPeriod=[{en:"month",ar:"شهر"},{en:"week",ar:"اسبوع"},{en:"day",ar:"يوم"}],a.lineCartConfig={duration:"day"},a.lineConfig={lay:"#d9d9d9",col:"#8ec2a7",tex:"#4e535a"},a.loadTransactionsPerHour=function(t,e,r){var l=null;a.lineCharts=null,a.lineChartsTable=[],t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-line").removeClass("on-charted"));var s=null;s=e?r?function(){return n.getTransactionsPerHour(a.lineCartConfig.duration,e,r)}:function(){return n.getTransactionsPerHour(a.lineCartConfig.duration,e)}:a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getTransactionsPerHour(a.lineCartConfig.duration,a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getTransactionsPerHour(a.lineCartConfig.duration,a.filter.emirate.branchPrefix)}:function(){return n.getTransactionsPerHour(a.lineCartConfig.duration)},s().then(function(t){i(function(){a.$apply(function(){a.lineCharts=null,a.lineChartsTable=[];a.lineChartsTable=[t.enteredPerHour,t.servedPerhour,t.noShowPerhour],a.lineCharts={data:[[t]],error:!(null!=t&&!t.error),empty:null},$(".chart-line").addClass("on-charted"),$(".chart-line").parents(".pile").removeClass("chart-loading")})})})},a.loadTransactionsPerHourDetails=function(t,e,r){a.ch_data=!1,a.id_appear=!1;var l=null;a.lineChartsDetails=null,a.TransPerHourTable=[],t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-line").removeClass("on-charted"));var s=null;e?(a.id_appear=!0,r?(a.ch_data=!0,s=function(){return n.getTransactionsPerHourDetails(a.lineCartConfig.duration,e,r)}):s=function(){return n.getTransactionsPerHourDetails(a.lineCartConfig.duration,e)}):a.filter.emirate?a.filter.emirate&&a.filter.branch?(a.ch_data=!0,s=function(){return n.getTransactionsPerHourDetails(a.lineCartConfig.duration,a.filter.emirate.branchPrefix,a.filter.branch.id)}):s=function(){return n.getTransactionsPerHourDetails(a.lineCartConfig.duration,a.filter.emirate.branchPrefix)}:s=function(){return n.getTransactionsPerHourDetails(a.lineCartConfig.duration)},s().then(function(t){i(function(){a.$apply(function(){a.lineChartsDetails=[],a.TransPerHourTable=null,a.lineChartsDetails={data:t},a.TransPerHourTable={data:t,error:!(null!=t&&!t.error),empty:0==t.length},html=a.TransPerHourTable.data,el=document.getElementById("myID"),el.innerHTML="",angular.element(el).append(u(html)(a))})})}).then(function(){i(function(){a.$apply(function(){$(".popup-scroll .summary-scroll-details").slimScroll({position:"rtl"==$("body").attr("dir")?"left":"right",height:"100%",railVisible:!1,alwaysVisible:!1,useFixedHeight:!0,fixedHeight:"50px"}).bind("slimscrolling",function(a,t){})})})})},a.BranchPeriod=["month","week","day"],a.barChartConfig={duration:"day"},a.loadServedPerBranch=function(t,e,r){var l=null;a.barSCharts=null,a.servedCharts=null,t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-bar").removeClass("on-charted"));var s=null;e?s=r?function(){return n.getServedPerBranch(a.barChartConfig.duration,e,r)}:function(){return n.getServedPerBranch(a.barChartConfig.duration,e)}:a.filter.emirate?(a.servdPerPlaceEN=servdPerPlaces[0].en[1],a.servdPerPlaceAR=servdPerPlaces[1].ar[1],a.filter.emirate&&a.filter.branch?(a.servdPerPlaceEN=servdPerPlaces[0].en[2],a.servdPerPlaceAR=servdPerPlaces[1].ar[2],s=function(){return n.getServedPerBranch(a.barChartConfig.duration,a.filter.emirate.branchPrefix,a.filter.branch.id)}):s=function(){return n.getServedPerBranch(a.barChartConfig.duration,a.filter.emirate.branchPrefix)}):s=function(){return n.getServedPerBranch(a.barChartConfig.duration)},s().then(function(t){i(function(){a.$apply(function(){a.barSCharts=null,a.servedCharts=null,a.barSCharts={data:t,error:!(null!=t&&!t.error),empty:0==t.length},a.servedCharts=[[a.barSCharts.data]],$(".chart-bar").addClass("on-charted"),$(".chart-bar").parents(".pile").removeClass("chart-loading")})})})},a.DepartmentPeriod=[{en:"month",ar:"شهر"},{en:"week",ar:"اسبوع"},{en:"day",ar:"يوم"}],a.barChartDConfig={duration:"day"},a.loadServedPerDepartment=function(t,e,r){a.servedDeptCharts=null,a.barCharts=null;var l=null;t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-dept").removeClass("on-charted"));var s=null;e?s=r?function(){return n.getServedPerDepartment(a.barChartDConfig.duration,e,r)}:function(){return n.getServedPerDepartment(a.barChartDConfig.duration,e)}:a.filter.emirate?a.filter.emirate&&a.filter.branch?(s=function(){return n.getServedPerDepartment(a.barChartDConfig.duration,a.filter.emirate.branchPrefix,a.filter.branch.id)},a.filter.emirate&&a.filter.branch&&a.filter.counter&&(s=function(){return n.getServedPerDepartment(a.barChartDConfig.duration,a.filter.emirate.branchPrefix,a.filter.branch.id,a.filter.counter.id)})):s=function(){return n.getServedPerDepartment(a.barChartDConfig.duration,a.filter.emirate.branchPrefix)}:s=function(){return n.getServedPerDepartment(a.barChartDConfig.duration)},s().then(function(t){i(function(){a.$apply(function(){a.servedDeptCharts=null,a.barCharts=null,a.barCharts={data:t},a.servedDeptCharts={data:[[a.barCharts.data]],error:!(null!=a.barCharts.data&&!a.barCharts.data.error),empty:0==a.barCharts.data.length},$(".chart-dept").addClass("on-charted"),$(".chart-dept").parents(".pile").removeClass("chart-loading")})})})},a.barChartDDetailsConfig={duration:"day"},a.loadServedPerDepartmentDetails=function(t,e,r){a.servedDeptDetails=[],a.barDetails=null,a.ch_title=null;var l=null;t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-dept").removeClass("on-charted"));var s=null;e?(a.ch_title=!0,s=r?function(){return n.getServedPerDepartmentDetails(a.barChartDConfig.duration,e,r)}:function(){return n.getServedPerDepartmentDetails(a.barChartDConfig.duration,e)}):a.filter.emirate?(a.Ctitle={en:"branch",ar:"فرع"},a.filter.emirate&&a.filter.branch?(a.Ctitle={en:"Counter",ar:"منفذ الخدمة"},s=function(){return n.getServedPerDepartmentDetails(a.barChartDConfig.duration,a.filter.emirate.branchPrefix,a.filter.branch.id)}):s=function(){return n.getServedPerDepartmentDetails(a.barChartDConfig.duration,a.filter.emirate.branchPrefix)}):s=function(){return n.getServedPerDepartmentDetails(a.barChartDConfig.duration)},s().then(function(t){var e=document.getElementById("myID2");e.innerHTML="",i(function(){a.$apply(function(){a.servedDeptDetails=[],a.barDetails=null,a.barDetails={data:t},a.servedDeptDetails={data:a.barDetails.data,error:!(null!=a.barDetails.data&&!a.barDetails.data.error),empty:0==a.barDetails.data.length},html=a.servedDeptDetails.data,angular.element(e).append(u(html)(a)),$(".chart-dept").addClass("on-charted"),$(".chart-dept").parents(".pile").removeClass("chart-loading")})},0)})},a.loadBranchSummary=function(t,e,r){a.cou_d=!1,a.Btitle=!1,a.barSummaryData=[],a.barSummary=null;var l=null;t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-summary").removeClass("on-charted"));var s=null;a.Btitle={en:"branch",ar:"فرع"},e?r?(a.Btitle={en:"Counter",ar:"منفذ الخدمة"},a.cou_d=!0,s=function(){return n.getBranchSummary(e,r,"counter")}):s=function(){return n.getBranchSummary(e)}:(a.Btitle={en:"branch",ar:"فرع"},a.filter.emirate?a.filter.emirate&&a.filter.branch?(a.Btitle={en:"Counter",ar:"منفذ الخدمة"},a.cou_d=!0,s=function(){return n.getBranchSummary(a.filter.emirate.branchPrefix,a.filter.branch.id,"counter")}):s=function(){return n.getBranchSummary(a.filter.emirate.branchPrefix)}:s=function(){return n.getBranchSummary()}),s().then(function(t){a.barSummary=null,i(function(){a.$apply(function(){if(a.barSummaryData=[],a.barSummary=null,a.barSummary={data:t,error:!(null!=t&&!t.error),empty:0==t.length},a.barSummary.data.length)for(var e=0;e<a.barSummary.data.length;e++)a.barSummaryData.push({emiratePrefix:a.barSummary.data[e].emiratePrefix,branchId:a.barSummary.data[e].branchId,name:a.barSummary.data[e].branchName?a.barSummary.data[e].branchName:a.barSummary.data[e].branchName,counter:a.barSummary.data[e].name,served:a.barSummary.data[e].served,waitting:a.barSummary.data[e].waitting,avgwtt:parseInt(a.barSummary.data[e].avgwtt),avgtrt:parseInt(a.barSummary.data[e].avgtrt),open:a.barSummary.data[e].open,closed:a.barSummary.data[e].closed,statusWtt:a.barSummary.data[e].statusWtt,statusTrt:a.barSummary.data[e].statusTrt,description:a.barSummary.data[e].description,status:a.barSummary.data[e].status,customersServed:a.barSummary.data[e].customersServed,sorting:a.barSummary.data[e].name?parseInt(a.barSummary.data[e].name.split(" ")[1]):"",currentCustomerName:a.barSummary.data[e].currentCustomerName,currentServiceCurrentTransactionTime:a.barSummary.data[e].currentServiceCurrentTransactionTime,currentServiceName:a.barSummary.data[e].currentServiceName,currentTicketNumber:a.barSummary.data[e].currentTicketNumber,currentTransactionTime:a.barSummary.data[e].currentTransactionTime,currentVisitId:a.barSummary.data[e].currentVisitId,serviceTargetTransTime:a.barSummary.data[e].serviceTargetTransTime,staffFullName:a.barSummary.data[e].staffFullName,totaltrt:parseInt(a.barSummary.data[e].totaltrt),workProfileName:a.barSummary.data[e].workProfileName});else a.barSummaryData.push({emiratePrefix:a.barSummary.data.emiratePrefix,branchId:a.barSummary.data.branchId,name:a.barSummary.data.branchName?a.barSummary.data.branchName:a.barSummary.data.name,counter:a.barSummary.data.name,served:a.barSummary.data.served,waitting:a.barSummary.data.waitting,avgwtt:parseInt(a.barSummary.data.avgwtt),avgtrt:parseInt(a.barSummary.data.avgtrt),open:a.barSummary.data.open,closed:a.barSummary.data.closed,statusWtt:a.barSummary.data.statusWtt,statusTrt:a.barSummary.data.statusTrt,description:a.barSummary.data.description,status:a.barSummary.data.status,customersServed:a.barSummary.data.customersServed,sorting:a.barSummary.data.name?parseInt(a.barSummary.data.name.split(" ")[1]):"",currentCustomerName:a.barSummary.data.currentCustomerName,currentServiceCurrentTransactionTime:a.barSummary.data.currentServiceCurrentTransactionTime,currentServiceName:a.barSummary.data.currentServiceName,currentTicketNumber:a.barSummary.data.currentTicketNumber,currentTransactionTime:a.barSummary.data.currentTransactionTime,currentVisitId:a.barSummary.data.currentVisitId,serviceTargetTransTime:a.barSummary.data.serviceTargetTransTime,staffFullName:a.barSummary.data.staffFullName,totaltrt:parseInt(a.barSummary.data.totaltrt),workProfileName:a.barSummary.data.workProfileName});$(".chart-summary").addClass("on-charted"),$(".chart-summary").parents(".pile").removeClass("chart-loading")})})}).then(function(){i(function(){a.$apply(function(){$(".popup-scroll .summary-scroll").slimScroll({position:"rtl"==$("body").attr("dir")?"left":"right",height:"100%",railVisible:!1,alwaysVisible:!1,useFixedHeight:!0,fixedHeight:"50px"}).bind("slimscrolling",function(a,t){})})})}).then(function(){i(function(){a.$apply(function(){$(".summary-scroll").each(function(){$(this).find(".summary-progress-w").each(function(t){var e=(this.getElementsByClassName("stats-number"),a.graphSettings.waiting.maxvalue),r=parseInt($(this).data("val"))>e?100:parseInt(100*$(this).data("val")/e),n=100*a.graphSettings.waiting.green/e,i=100*a.graphSettings.waiting.amber/e;100*a.graphSettings.waiting.maxvalue/e;$(this).find(".bar:not(.expanded)").each(function(){r<=n?($(this).addClass("happy"),$(this).addClass("empty")):r>n&&r<=i?$(this).addClass("normal"):r>i&&$(this).addClass("sad"),$(this).css("max-width",r+"%"),$(this).addClass("expanded")})})})})})}).then(function(){i(function(){a.$apply(function(){$(".summary-scroll").each(function(){$(this).find(".summary-progress-t").each(function(t){var e=(this.getElementsByClassName("stats-number"),a.graphSettings.transac.maxvalue),r=parseInt($(this).data("val"))>e?100:parseInt(100*$(this).data("val")/e),n=100*a.graphSettings.transac.green/e,i=100*a.graphSettings.transac.amber/e;100*a.graphSettings.transac.maxvalue/e;$(this).find(".bar:not(.expanded)").each(function(){r<=n?($(this).addClass("happy"),$(this).addClass("empty")):r>n&&r<=i?$(this).addClass("normal"):r>i&&$(this).addClass("sad"),$(this).css("max-width",r+"%"),$(this).addClass("expanded")})})})})})})},a.loadOperationalSummary=function(t,e,r){a.Ctitle={en:"Emirates",ar:"الإمارات"},a.barOperationalData=[],a.barOperational=null;var l=null;t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-summary").removeClass("on-charted"));var s=null;e?(a.Ctitle={en:"Branch",ar:"فرع"},s=r?function(){return n.getOperationalSummary(e,r)}:function(){return n.getOperationalSummary(e)}):a.filter.emirate?(a.Ctitle={en:"Branch",ar:"فرع"},s=a.filter.emirate&&a.filter.branch?function(){return n.getOperationalSummary(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getOperationalSummary(a.filter.emirate.branchPrefix)}):s=function(){return n.getOperationalSummary()},s().then(function(t){a.barOperational=null,i(function(){a.$apply(function(){if(a.barOperationalData=[],a.barOperational=null,a.barOperational={data:t,error:!(null!=t&&!t.error),empty:0==t.length},a.filter.branch)a.barOperationalData.push(t);else if(a.barOperational.data.length)for(var e=0;e<a.barOperational.data.length;e++)a.barOperationalData.push({name:a.barOperational.data[e].branchName?a.barOperational.data[e].branchName:a.barOperational.data[e].name,served:a.barOperational.data[e].served,noShow:a.barOperational.data[e].noShow,waitting:a.barOperational.data[e].waitting,avgwtt:parseInt(a.barOperational.data[e].avgwtt),avgtrt:parseInt(a.barOperational.data[e].avgtrt),open:a.barOperational.data[e].open,closed:a.barOperational.data[e].closed,statusWtt:a.barOperational.data[e].statusWtt,statusTrt:a.barOperational.data[e].statusTrt,emiratePrefix:a.barOperational.data[e].emiratePrefix,id:a.barOperational.data[e].branchId,description:a.barOperational.data[e].description});else a.barOperationalData.push({name:a.barOperational.data.branchName?a.barOperational.branchName:a.barOperational.data.name,served:a.barOperational.data.served,noShow:a.barOperational.data.noShow,waitting:a.barOperational.data.waitting,avgwtt:parseInt(a.barOperational.data.avgwtt),avgtrt:parseInt(a.barOperational.data.avgtrt),open:a.barOperational.data.open,closed:a.barOperational.data.closed,statusWtt:a.barOperational.data.statusWtt,statusTrt:a.barOperational.data.statusTrt,emiratePrefix:a.barOperational.data.emiratePrefix,id:a.barOperational.data.branchId,description:a.barOperational.data.description});$(".chart-summary").addClass("on-charted"),$(".chart-summary").parents(".pile").removeClass("chart-loading")})})}).then(function(){i(function(){a.$apply(function(){$(".chart-summary .summary-scroll").slimScroll({position:"rtl"==$("body").attr("dir")?"left":"right",height:"100%",railVisible:!1,alwaysVisible:!1,useFixedHeight:!0,fixedHeight:"50px"}).bind("slimscrolling",function(a,t){})})})})},a.loadOperationalSummaryQ=function(t,e,r){a.Qtitle={en:"Emirates",ar:"الإمارات"},a.barOperationalDataQ=[],a.barOperationalQ=null;var l=null;t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-summary").removeClass("on-charted"));var s=null;e?(a.Qtitle={en:"Branch",ar:"فرع"},r?(a.Qtitle={en:"Queue",ar:"الطابور"},s=function(){return n.getOperationalSummaryQ(e,r)}):s=function(){return n.getOperationalSummaryQ(e)}):a.filter.emirate?(a.Qtitle={en:"Branch",ar:"فرع"},a.filter.emirate&&a.filter.branch?(a.Qtitle={en:"Queue",ar:"الطابور"},s=function(){return n.getOperationalSummaryQ(a.filter.emirate.branchPrefix,a.filter.branch.id)}):s=function(){return n.getOperationalSummaryQ(a.filter.emirate.branchPrefix)}):s=function(){return n.getOperationalSummaryQ()},s().then(function(t){a.barOperationalQ=null,i(function(){a.$apply(function(){if(a.inbr=!1,a.barOperationalDataQ=[],a.barOperationalQ=null,a.barOperationalQ={data:t,error:!(null!=t&&!t.error),empty:0==t.length},a.filter.branch||r)a.inbr=!0,a.barOperationalDataQ=t;else if(a.barOperationalQ.data.length)for(var e=0;e<a.barOperationalQ.data.length;e++)a.barOperationalDataQ.push({name:a.barOperationalQ.data[e].branchName?a.barOperationalQ.data[e].branchName:a.barOperationalQ.data[e].name,served:a.barOperationalQ.data[e].served,waitting:a.barOperationalQ.data[e].waitting,avgwtt:parseInt(a.barOperationalQ.data[e].avgwtt).toFixed(0),avgtrt:parseInt(a.barOperationalQ.data[e].avgtrt).toFixed(0),open:a.barOperationalQ.data[e].open,closed:a.barOperationalQ.data[e].closed,statusWtt:a.barOperationalQ.data[e].statusWtt,statusTrt:a.barOperationalQ.data[e].statusTrt,emiratePrefix:a.barOperationalQ.data[e].emiratePrefix,id:a.barOperationalQ.data[e].branchId,description:a.barOperationalQ.data[e].description,noShow:a.barOperationalQ.data[e].noShow});else a.barOperationalDataQ.push({name:a.barOperationalQ.data.branchName?a.barOperationalQ.data.branchName:a.barOperationalQ.data.name,served:a.barOperationalQ.data.served,waitting:a.barOperationalQ.data.waitting,avgwtt:parseInt(a.barOperationalQ.data.avgwtt).toFixed(0),avgtrt:parseInt(a.barOperationalQ.data.avgtrt).toFixed(0),open:a.barOperationalQ.data.open,closed:a.barOperationalQ.data.closed,statusWtt:a.barOperationalQ.data.statusWtt,statusTrt:a.barOperationalQ.data.statusTrt,emiratePrefix:a.barOperationalQ.data.emiratePrefix,id:a.barOperationalQ.data.branchId,description:a.barOperationalQ.data.description,noShow:a.barOperationalQ.data.noShow});$(".chart-summary").addClass("on-charted"),$(".chart-summary").parents(".pile").removeClass("chart-loading")})})}).then(function(){i(function(){a.$apply(function(){$(".popup-scroll .summary-scroll").slimScroll({position:"rtl"==$("body").attr("dir")?"left":"right",height:$(".popup-pillar").height(),railVisible:!1,alwaysVisible:!1,useFixedHeight:!0,fixedHeight:"50px"}).bind("slimscrolling",function(a,t){})})})}).then(function(){i(function(){a.$apply(function(){$(".summary-scroll").find(".summary-progress-w").each(function(t){var e=(this.getElementsByClassName("stats-number"),a.graphSettings.waiting.maxvalue),r=parseInt($(this).data("val"))>e?100:parseInt(100*$(this).data("val")/e),n=100*a.graphSettings.waiting.green/e,i=100*a.graphSettings.waiting.amber/e;100*a.graphSettings.waiting.maxvalue/e;$(this).find(".bar:not(.expanded)").each(function(){r<=n?($(this).addClass("happy"),$(this).addClass("empty")):r>n&&r<=i?$(this).addClass("normal"):r>i&&$(this).addClass("sad"),$(this).css("max-width",r+"%"),$(this).addClass("expanded")})})})})}).then(function(){i(function(){a.$apply(function(){$(".summary-scroll").find(".summary-progress-t").each(function(t){var e=(this.getElementsByClassName("stats-number"),a.graphSettings.transac.maxvalue),r=parseInt($(this).data("val"))>e?100:parseInt(100*$(this).data("val")/e),n=parseInt(100*a.graphSettings.transac.green)/e,i=parseInt(100*a.graphSettings.transac.amber)/e;parseInt(100*a.graphSettings.transac.maxvalue)/e;$(this).find(".bar:not(.expanded)").each(function(){r<=n?($(this).addClass("happy"),$(this).addClass("empty")):r>n&&r<=i?$(this).addClass("normal"):r>i&&$(this).addClass("sad"),$(this).css("max-width",r+"%"),$(this).addClass("expanded")})})})})})},a.loadOperationalSummaryC=function(t,e,r){a.Ctitle={en:"Emirates",ar:"الإمارات"},a.barOperationalDataC=[],a.barOperationalC=null;var l=null;t&&(l=$(t.target.closest(".pile")),$(l).addClass("chart-loading").find(".chart-summary").removeClass("on-charted"));var s=null;e?(a.Ctitle={en:"Branch",ar:"فرع"},r?(a.Ctitle={en:"Counter",ar:"منفذ الخدمة"},s=function(){return n.getOperationalSummary(e,r,"counter")}):s=function(){return n.getOperationalSummary(e)}):a.filter.emirate?(a.Ctitle={en:"Branch",ar:"فرع"},a.filter.emirate&&a.filter.branch?(a.Ctitle={en:"Counter",ar:"منفذ الخدمة"},s=function(){return n.getOperationalSummary(a.filter.emirate.branchPrefix,a.filter.branch.id,"counter")}):s=function(){return n.getOperationalSummary(a.filter.emirate.branchPrefix)}):s=function(){return n.getOperationalSummary()},s().then(function(t){a.barOperationalC=null,i(function(){a.$apply(function(){if(a.inbr=!1,a.barOperationalDataC=[],a.barOperationalC=null,a.barOperationalC={data:t,error:!(null!=t&&!t.error),empty:0==t.length},a.filter.branch||r){a.inbr=!0;for(var e=0;e<a.barOperationalC.data.length;e++)a.barOperationalDataC.push({name:a.barOperationalC.data[e].name,sorting:parseInt(a.barOperationalC.data[e].name.split(" ")[1]),description:a.barOperationalC.data[e].description,currentCustomerName:a.barOperationalC.data[e].currentCustomerName,currentServiceCurrentTransactionTime:a.barOperationalC.data[e].currentServiceCurrentTransactionTime,currentServiceName:a.barOperationalC.data[e].currentServiceName,currentTicketNumber:a.barOperationalC.data[e].currentTicketNumber,currentTransactionTime:a.barOperationalC.data[e].currentTransactionTime,currentVisitId:a.barOperationalC.data[e].currentVisitId,emiratePrefix:a.barOperationalC.data[e].emiratePrefix,id:a.barOperationalC.data[e].branchId,customersServed:a.barOperationalC.data[e].customersServed,serviceTargetTransTime:a.barOperationalC.data[e].serviceTargetTransTime,staffFullName:a.barOperationalC.data[e].staffFullName,status:a.barOperationalC.data[e].status,statusTrt:a.barOperationalC.data[e].statusTrt,totaltrt:parseInt(a.barOperationalC.data[e].totaltrt),workProfileName:a.barOperationalC.data[e].workProfileName})}else if(a.barOperationalC.data.length)for(var e=0;e<a.barOperationalC.data.length;e++)a.barOperationalDataC.push({name:a.barOperationalC.data[e].branchName?a.barOperationalC.data[e].branchName:a.barOperationalC.data[e].name,served:a.barOperationalC.data[e].served,waitting:a.barOperationalC.data[e].waitting,avgwtt:parseInt(a.barOperationalC.data[e].avgwtt),avgtrt:parseInt(a.barOperationalC.data[e].avgtrt),open:a.barOperationalC.data[e].open,closed:a.barOperationalC.data[e].closed,statusWtt:a.barOperationalC.data[e].statusWtt,statusTrt:a.barOperationalC.data[e].statusTrt,emiratePrefix:a.barOperationalC.data[e].emiratePrefix,id:a.barOperationalC.data[e].branchId,description:a.barOperationalC.data[e].description});else a.barOperationalDataC.push({name:a.barOperationalC.data.branchName?a.barOperationalC.data.branchName:a.barOperationalC.data.name,served:a.barOperationalC.data.served,waitting:a.barOperationalC.data.waitting,avgwtt:parseInt(a.barOperationalC.data.avgwtt),avgtrt:parseInt(a.barOperationalC.data.avgtrt),open:a.barOperationalC.data.open,closed:a.barOperationalC.data.closed,statusWtt:a.barOperationalC.data.statusWtt,statusTrt:a.barOperationalC.data.statusTrt,emiratePrefix:a.barOperationalC.data.emiratePrefix,id:a.barOperationalC.data.branchId,description:a.barOperationalC.data.description,totaltrt:a.barOperationalC.data.totaltrt});$(".chart-summary").addClass("on-charted"),$(".chart-summary").parents(".pile").removeClass("chart-loading")})})}).then(function(){i(function(){a.$apply(function(){$(".chart-summary .summary-scroll").slimScroll({position:"rtl"==$("body").attr("dir")?"left":"right",height:"100%",railVisible:!1,alwaysVisible:!1,useFixedHeight:!0,fixedHeight:"50px"}).bind("slimscrolling",function(a,t){})})})}).then(function(){i(function(){a.$apply(function(){$(".summary-scroll").find(".summary-progress-w").each(function(t){var e=(this.getElementsByClassName("stats-number"),a.graphSettings.waiting.maxvalue),r=parseInt($(this).data("val"))>e?100:parseInt(100*$(this).data("val")/e),n=100*a.graphSettings.waiting.green/e,i=100*a.graphSettings.waiting.amber/e;100*a.graphSettings.waiting.maxvalue/e;$(this).find(".bar:not(.expanded)").each(function(){r<=n?($(this).addClass("happy"),$(this).addClass("empty")):r>n&&r<=i?$(this).addClass("normal"):r>i&&$(this).addClass("sad"),$(this).css("max-width",r+"%"),$(this).addClass("expanded")})})})})}).then(function(){i(function(){a.$apply(function(){$(".summary-scroll").find(".summary-progress-t").each(function(t){var e=(this.getElementsByClassName("stats-number"),a.graphSettings.transac.maxvalue),r=parseInt($(this).data("val"))>e?100:parseInt(100*$(this).data("val")/e),n=100*a.graphSettings.transac.green/e,i=100*a.graphSettings.transac.amber/e;100*a.graphSettings.transac.maxvalue/e;$(this).find(".bar:not(.expanded)").each(function(){r<=n?($(this).addClass("happy"),$(this).addClass("empty")):r>n&&r<=i?$(this).addClass("normal"):r>i&&$(this).addClass("sad"),$(this).css("max-width",r+"%"),$(this).addClass("expanded")})})})})})},a.happinessDuration=[{ens:"month",en:"monthly",ar:"شهر"},{ens:"week",en:"weekly",ar:"اسبوع"},{ens:"day",en:"daily",ar:"يوم"}],a.happinessconfig={duration:"daily"},a.loadHappinessRank=function(t){a.happinessRank=null;var e=null;t&&(e=$(t.target.closest(".pile")),$(e).addClass("chart-loading").find(".chart-happiness").removeClass("on-charted"));var r=null;r=a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getBranchHappinessRank(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getBranchHappinessRank(a.filter.emirate.branchPrefix)}:function(){return n.getBranchHappinessRank()},r().then(function(t){i(function(){a.$apply(function(){a.happinessRankData=[],a.happinessRank=null,a.happinessRank={data:t,error:!(null!=t&&!t.error),empty:0==t.length},a.filter.emirate&&a.filter.branch&&(a.happinessRank={data:[t],error:!(null!=t&&!t.error),
empty:0==t.length}),$(".chart-happiness").addClass("on-charted"),$(".chart-happiness").parents(".pile").removeClass("chart-loading")})})}).then(function(){i(function(){a.$apply(function(){$(".happiness-scroll").slimScroll({position:"rtl"==$("body").attr("dir")?"left":"right",height:$(".chart-happiness").parents(".pile").height()-175,railVisible:!1,alwaysVisible:!1,useFixedHeight:!0,fixedHeight:"50px"}).bind("slimscrolling",function(a,t){})})})}).then(function(){i(function(){a.$apply(function(){$(".chart-happiness .progress .stats-number").countTo({speed:2e3,refreshInterval:50,onUpdate:function(a){a>33.333&&a<=66.6666?$(this).prev(".stats-img").addClass("ind-normal"):a>66.6666&&$(this).prev(".stats-img").addClass("ind-happy")}})})})})},a.loadHappinessStatus=function(t){a.happinessStatus=null;var e=null;e=a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getBranchHappinessStatus(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getBranchHappinessStatus(a.filter.emirate.branchPrefix)}:function(){return n.getBranchHappinessStatus()},e().then(function(t){i(function(){a.$apply(function(){a.happinessStatus=null,"daily"==a.happinessconfig.duration?a.happinessStatus=t.daily:"monthly"==a.happinessconfig.duration?a.happinessStatus=t.monthly:"weekly"==a.happinessconfig.duration?a.happinessStatus=t.weekly:a.happinessStatus=t.total})})}).then(function(){i(function(){a.$apply(function(){})})})},a.loadHappinessRadar=function(t){a.happinessradar=[];var e=null;t&&(e=$(t.target.closest(".pile")),$(e).addClass("chart-loading").find(".radar-happiness").removeClass("on-charted"));var r=null;r=a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getHappinessRadar(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getHappinessRadar(a.filter.emirate.branchPrefix)}:function(){return n.getHappinessRadar()},r().then(function(t){i(function(){a.$apply(function(){a.happinessRadar=[],"daily"==a.happinessconfig.duration?a.happinessRadar={data:t.daily,error:!(null!=t&&!t.error),empty:0==t.length}:"monthly"==a.happinessconfig.duration?a.happinessRadar={data:t.monthly,error:!(null!=t&&!t.error),empty:0==t.length}:"weekly"==a.happinessconfig.duration?a.happinessRadar={data:t.weekly,error:!(null!=t&&!t.error),empty:0==t.length}:a.happinessRadar={data:t.weekly,error:!(null!=t&&!t.error),empty:0==t.length}})})}).then(function(){i(function(){a.$apply(function(){a.happinessgoodEn=[],a.happinessexEn={},a.happinesspoEn=[],a.happinessgoodAr=[],a.happinessexAr=[],a.happinesspoAr=[];for(var t=0;t<a.happinessRadar.data.good.length;t++)a.happinessgoodEn.push({axis:a.happinessRadar.data.good[t].texts.en,value:a.happinessRadar.data.good[t].value});a.happinessexEn={data:[[a.happinessRadar.data.excellent[0].value,a.happinessRadar.data.excellent[1].value]],label1_en:a.happinessRadar.data.excellent[0].texts.en,label2_en:a.happinessRadar.data.excellent[1].texts.en,label1_ar:a.happinessRadar.data.excellent[0].texts.ar,label2_ar:a.happinessRadar.data.excellent[1].texts.ar,value1:a.happinessRadar.data.excellent[0].value,value2:a.happinessRadar.data.excellent[1].value};for(var t=0;t<a.happinessRadar.data.poor.length;t++)a.happinesspoEn.push({axis:a.happinessRadar.data.poor[t].texts.en,value:a.happinessRadar.data.poor[t].value});for(var t=0;t<a.happinessRadar.data.good.length;t++)a.happinessgoodAr.push({axis:a.happinessRadar.data.good[t].texts.ar,value:a.happinessRadar.data.good[t].value});for(var t=0;t<a.happinessRadar.data.excellent.length;t++)a.happinessexAr.push({axis:a.happinessRadar.data.excellent[t].texts.ar,value:a.happinessRadar.data.excellent[t].value});for(var t=0;t<a.happinessRadar.data.poor.length;t++)a.happinesspoAr.push({axis:a.happinessRadar.data.poor[t].texts.ar,value:a.happinessRadar.data.poor[t].value})})})}).then(function(){i(function(){a.$apply(function(){var t=[a.happinessgoodEn],e=[a.happinesspoEn],r=[a.happinessgoodAr],n=[a.happinesspoAr],i=d3.scale.ordinal().range(["#ffb823"]),l=d3.scale.ordinal().range(["#f5516c"]),s={top:100,right:100,bottom:100,left:100},o=Math.min(390,window.innerWidth-10)-s.left-s.right,u=Math.min(o,window.innerHeight-s.top-s.bottom-20),d={w:o,h:u,margin:s,levels:5,roundStrokes:!0,color:i},c={w:o,h:u,margin:s,levels:5,roundStrokes:!0,color:l};RadarChart("#good-radar",t,d),RadarChart("#poor-radar",e,c),RadarChart("#good-radar-ar",r,d),RadarChart("#poor-radar-ar",n,c),$(".radar-happiness").addClass("on-charted"),$(".radar-happiness").parents(".pile").removeClass("chart-loading")})})})},a.loadHappinessScore=function(t){a.happinessScore=null;var e=null;e=a.filter.emirate?a.filter.emirate&&a.filter.branch?function(){return n.getBranchHappinessScore(a.filter.emirate.branchPrefix,a.filter.branch.id)}:function(){return n.getBranchHappinessScore(a.filter.emirate.branchPrefix)}:function(){return n.getBranchHappinessScore()},e().then(function(t){i(function(){a.$apply(function(){a.happinessScore=null,"daily"==a.happinessconfig.duration?a.happinessScore=t.daily:"monthly"==a.happinessconfig.duration?a.happinessScore=t.monthly:"weekly"==a.happinessconfig.duration?a.happinessScore=t.weekly:a.happinessScore=t.total})})}).then(function(){i(function(){a.$apply(function(){$(".stats-count .stats-number").countTo({from:0,to:a.happinessScore.avg,speed:3e3,refreshInterval:50})})})})},a.embr={emirate:"",branch:"",emName:null,brName:null},a.resetdrill=function(){a.embr={emirate:"",branch:"",emName:null,brName:null}},a.resetdrillBranch=function(){a.embr.branch="",a.embr.brName=null},a.filterOperational=function(t,e){var r;e&&(r=$(e.target));var n=$(r).attr("data-emirateID"),i=$(r).attr("data-branchID");n&&(a.embr={emirate:n,branch:i?i:null,emName:n&&i?a.embr.emName:$(r).text(),brName:i?$(r).text():null},0==t?"H"==$(r).attr("data-type")?""!=i?a.loadTransactionsPerHourDetails(e,n,i):a.loadTransactionsPerHourDetails(e,n):"D"==$(r).attr("data-type")&&(""!=i?a.loadServedPerDepartmentDetails(e,n,i):a.loadServedPerDepartmentDetails(e,n)):"Q"==t?""!=i?a.loadOperationalSummaryQ(e,n,i):a.loadOperationalSummaryQ(e,n):"C"==t?""!=i?a.loadOperationalSummaryC(e,n,i):a.loadOperationalSummaryC(e,n):"S"==t?""!=i?a.loadOperationalSummary(e,n,i):a.loadOperationalSummary(e,n):"H"==t?""!=i?a.loadTransactionsPerHourDetails(e,n,i):a.loadTransactionsPerHourDetails(e,n):"D"==t?""!=i?a.loadServedPerDepartmentDetails(e,n,i):a.loadServedPerDepartmentDetails(e,n):"B"==t?""!=i?a.loadServedPerBranch(e,n,i):a.loadServedPerBranch(e,n):"P"==t&&(""!=i?a.loadBranchSummary(e,n,i):a.loadBranchSummary(e,n)))},a.open=function(t,e){t.preventDefault();var r=$(t.target.closest(".toggle-open")),n=r.data("open");switch(e){case"emirates":$(r).hasClass("open")?($(r).removeClass("open"),$(".toggle-open-target[data-open="+n+"]").removeClass("open"),a.getFiltered()):($(r).addClass("open"),$(".toggle-open-target[data-open="+n+"]").addClass("open"));break;case"noti":$(".notification-menu").toggleClass("open"),$(r).toggleClass("open");break;case"menu":$(".left-menu").toggleClass("open"),$(r).toggleClass("open");break;case"dept":$(".department-panel-container").toggleClass("open"),$(r).toggleClass("open")}},a["export"]=function(a,t){var t=t;""!=t&&JSONToCSVConvertor(t,"CCR",!0)},a.openPile=function(a){a.preventDefault();var t=$(a.target.closest(".pile"));$("body .popup-helper").remove(),$("body").append("<div class='popup-helper'></div>"),$(".pile-popup").addClass("opened"),$(".pile-popup").find(".popup-pillar[data-popup="+$(t).attr("data-popup")+"]").addClass("active")},$("a.back-popup").on("click",function(){$(".pile-popup").removeClass("opened"),$(".pile-popup .popup-pillar").removeClass("active"),a.embr={emirate:null,branch:null,emName:null,brName:null},a.initFunctions()}),a.getFiltered=function(){a.embr={emirate:null,branch:null,emName:null,brName:null},$(".pile").addClass("chart-loading").find(".chart-gauge").removeClass("on-charted"),a.initFunctions(),$(".filter.toggle-open").removeClass("open"),$(".toggle-open-target[data-open="+$(".filter.toggle-open").data("open")+"]").removeClass("open")};var m=function(a,t,e){function r(){s.update(n)}var n=t;$("#"+a).empty();var i={},l=$(window).width();i=l>1366?{size:$("#"+a).parent().outerWidth()-70,clipWidth:$("#"+a).parent().outerWidth()-70,clipHeight:$("#"+a).parent().outerHeight()-90,ringWidth:30}:{size:$("#"+a).parent().outerWidth()-70,clipWidth:$("#"+a).parent().outerWidth()-70,clipHeight:$("#"+a).parent().outerHeight()-20,ringWidth:20};var s=gauge("#"+a,{size:i.size,clipWidth:i.clipWidth,clipHeight:i.clipHeight,ringWidth:i.ringWidth,minValue:0,maxValue:parseInt(e.maxvalue),majorTicks:parseInt(e.maxvalue)/5,transitionMs:4e3,green:parseInt(e.green)/5,amber:(parseInt(e.amber)-parseInt(e.green))/5,red:(parseInt(e.maxvalue)-parseInt(e.amber))/5});s.render(n),r(),setTimeout(function(){$("#"+a).addClass("on-charted")})};a.clearFilter=function(t,e){"department"==t?(e?a.filter.department.splice(a.filter.department.indexOf(e),1):a.filter.department=[],$('[data-model="NONMOHRE"][data-prefix = "AllOTHERS"]:checked').prop("checked",!1),$(".all-filter-dep").remove()):"emirates"==t?(a.filter.emirate=null,a.filter.branch=null,a.filter.counter=null,a.loadingBranches=!1,a.loadingCounters=!1,a.branches=null,a.counters=null,a.servdPerPlaceEN=servdPerPlaces[0].en[0],a.servdPerPlaceAR=servdPerPlaces[1].ar[0]):"branches"==t?(a.filter.branch=null,a.filter.counter=null,a.loadingCounters=!1,a.counters=null,a.servdPerPlaceEN=servdPerPlaces[0].en[1],a.servdPerPlaceAR=servdPerPlaces[1].ar[1]):"counters"==t&&(a.filter.counter=null,a.loadingCounters=!1),$(".filter-panel-container").hasClass("open")||a.initFunctions()},a.aXisesColor="#bbbbbb",a.lineColor="#c40029";a.countdownInterval=function(){a.intervalload=l(a.initFunctions,e)},window.isLoaded?(d(),a.initFunctions(),c(),p(),a.countdownInterval()):window.addEventListener("load",function(){d(),a.initFunctions(),c(),p(),a.countdownInterval()},!1),a.initFunctions=function(){n.passDepartment(a.filter.department),$(".pile").addClass("chart-loading"),a.loadWaitingTime(null,a.embr.emirate,a.embr.branch),a.loadTransactionTime(null,a.embr.emirate,a.embr.branch),a.loadCounterStatus(null,a.embr.emirate,a.embr.branch),a.loadCustomerStatus(null,a.embr.emirate,a.embr.branch),a.loadTransactionsPerHour(null,a.embr.emirate,a.embr.branch),a.loadServedPerBranch(null,a.embr.emirate,a.embr.branch),a.loadServedPerDepartment(null,a.embr.emirate,a.embr.branch),a.loadBranchSummary(null,a.embr.emirate,a.embr.branch),a.loadOperationalSummary(null,a.embr.emirate,a.embr.branch),a.loadOperationalSummaryC(null,a.embr.emirate,a.embr.branch),a.loadOperationalSummaryQ(null,a.embr.emirate,a.embr.branch),a.loadServedPerDepartmentDetails(null,a.embr.emirate,a.embr.branch),a.loadTransactionsPerHourDetails(null,a.embr.emirate,a.embr.branch),a.loadHappinessRank(null,a.embr.emirate,a.embr.branch),a.loadHappinessScore(null,a.embr.emirate,a.embr.branch),a.loadHappinessStatus(null,a.embr.emirate,a.embr.branch),a.loadHappinessRadar(null,a.embr.emirate,a.embr.branch)}}};a.controller("MainController",["$scope","$http","$api","$timeout","$interval","$q","$filter","$compile",r]).filter("emptyToEnd",function(){return function(a,t){var e=a.filter(function(a){return a[t]}),r=a.filter(function(a){return!a[t]});return e.concat(r)}})}();